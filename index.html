<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Anime Player</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-hls-quality/dist/artplayer-plugin-hls-quality.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        #artplayer { width: 100vw; height: 100vh; }
        
        /* Custom Skip Intro Button Styling */
        .skip-intro {
            position: absolute;
            bottom: 70px;
            right: 20px;
            padding: 10px 25px;
            background: rgba(255, 173, 0, 0.95);
            color: #000;
            font-family: sans-serif;
            font-weight: 900;
            border-radius: 5px;
            cursor: pointer;
            z-index: 999;
            display: none;
            transition: transform 0.2s;
            border: 2px solid white;
        }
        .skip-intro:hover { transform: scale(1.1); background: #fff; }
    </style>
</head>
<body>

    <div id="artplayer"></div>
    <div id="skip-btn" class="skip-intro">SKIP INTRO</div>

    <script>
        // 1. Setup Proxy & Data
        const PROXY = "https://proxy-pi-tawny.vercel.app/?url=";
        const videoData = {
            m3u8: "https://haildrop77.pro/_v7/.../master.m3u8",
            intro: { start: 0, end: 89 },
            tracks: [{ file: "https://mgstatics.xyz/subtitle/.../eng.vtt", label: "English", default: true }]
        };

        // 2. Initialize Player
        const art = new Artplayer({
            container: '#artplayer',
            url: PROXY + encodeURIComponent(videoData.m3u8),
            type: 'm3u8',
            theme: '#ffad00',
            fullscreen: true,
            setting: true,
            playbackRate: true,
            aspectRatio: true,
            hotkey: true,
            pip: true,
            // 3. Custom Icons - Replace these strings with your SVG code
            icons: {
                loading: '<img width="60" src="https://artplayer.org/assets/img/ploading.gif">',
                state: '<svg width="100" height="100">...</svg>', 
            },
            subtitle: {
                url: PROXY + encodeURIComponent(videoData.tracks[0].file),
                type: 'vtt',
                style: { color: '#fff', fontSize: '25px' }
            },
            plugins: [
                artplayerPluginHlsQuality({
                    control: true, // Quality Selection like Megaplay
                    getResolution: (level) => level.height + 'p',
                }),
            ],
            customType: {
                m3u8: function (video, url) {
                    if (Hls.isSupported()) {
                        const hls = new Hls();
                        hls.loadSource(url);
                        hls.attachMedia(video);
                        art.hls = hls; // Connect HLS to Artplayer instance
                    }
                },
            },
        });

        // 4. Megaplay Skip Intro Logic
        const skipBtn = document.getElementById('skip-btn');
        art.on('video:timeupdate', () => {
            if (art.currentTime >= videoData.intro.start && art.currentTime <= videoData.intro.end) {
                skipBtn.style.display = 'block';
            } else {
                skipBtn.style.display = 'none';
            }
        });

        skipBtn.onclick = () => {
            art.currentTime = videoData.intro.end;
            art.notice.show = 'Intro Skipped';
        };

        // 5. Auto-Next Placeholder (For your next-episode logic)
        art.on('video:ended', () => {
            alert("Episode Finished! Redirecting to next...");
        });
    </script>
</body>
</html>
